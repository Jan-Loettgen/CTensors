\hypertarget{tensor__2d__threaded_8c_source}{}\doxysection{tensor\+\_\+2d\+\_\+threaded.\+c}
\label{tensor__2d__threaded_8c_source}\index{tensor\_2d\_threaded.c@{tensor\_2d\_threaded.c}}
\mbox{\hyperlink{tensor__2d__threaded_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00001}00001 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00002}00002 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00003}00003 \textcolor{preprocessor}{\#include <pthread.h>}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00005}00005 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{tensor__2d_8h}{tensor\_2d.h}}"{}}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{tensor__2d__threaded_8h}{tensor\_2d\_threaded.h}}"{}}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00008}\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{00008}} \textcolor{preprocessor}{\#define NUM\_THREADS 13}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00010}\mbox{\hyperlink{structarray__op__args}{00010}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structarray__op__args}{array\_op\_args}}\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00011}\mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{00011}}     \textcolor{keywordtype}{double}* \mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{arr\_1}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00012}\mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{00012}}     \textcolor{keywordtype}{double}* \mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{arr\_2}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00013}\mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{00013}}     \textcolor{keywordtype}{double}* \mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{arr\_out}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00014}\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{00014}}     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00015}\mbox{\hyperlink{tensor__2d__threaded_8c_aca78a11d086ce891f7a8b9db2d9ed2d7}{00015}} \} \mbox{\hyperlink{tensor__2d__threaded_8c_aca78a11d086ce891f7a8b9db2d9ed2d7}{array\_op\_args}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00017}\mbox{\hyperlink{structarray__mat__mul__args}{00017}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structarray__mat__mul__args}{array\_mat\_mul\_args}}\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00018}\mbox{\hyperlink{structarray__mat__mul__args_a06fbdde7fca4cd3be5d7d25c72ce636b}{00018}}     \textcolor{keywordtype}{double}* \mbox{\hyperlink{structarray__mat__mul__args_a06fbdde7fca4cd3be5d7d25c72ce636b}{arr}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00019}\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{00019}}     \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* \mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00020}\mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{00020}}     \textcolor{keywordtype}{double}* \mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{arr\_out}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00021}\mbox{\hyperlink{tensor__2d__threaded_8c_a70eb961a476aa58a32264d34dea7b43d}{00021}} \}\mbox{\hyperlink{tensor__2d__threaded_8c_a70eb961a476aa58a32264d34dea7b43d}{array\_mat\_mul\_args}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00023}00023 \textcolor{keyword}{static} \textcolor{keywordtype}{void}* array\_add(\textcolor{keywordtype}{void}* args\_ptr)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00024}00024     \mbox{\hyperlink{structarray__op__args}{array\_op\_args}}* args = (\mbox{\hyperlink{structarray__op__args}{array\_op\_args}}*)args\_ptr;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00025}00025     \textcolor{keywordtype}{double}* arr\_1 = args-\/>\mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{arr\_1}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00026}00026     \textcolor{keywordtype}{double}* arr\_2 = args-\/>\mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{arr\_2}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00027}00027     \textcolor{keywordtype}{double}* arr\_out = args-\/>\mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{arr\_out}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00028}00028     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length = args-\/>\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00030}00030     \textcolor{keywordflow}{if} (arr\_1 == NULL || arr\_2 == NULL || arr\_out == NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00031}00031         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00032}00032     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00033}00033     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} i=0; i<length; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00034}00034         arr\_out[i] = arr\_1[i] + arr\_2[i];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00035}00035     \}   }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00036}00036     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00037}00037 \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00039}\mbox{\hyperlink{tensor__2d__threaded_8c_a3297fdae3fbc4a0f8a36f5de24b7994b}{00039}} \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* \mbox{\hyperlink{tensor__2d__threaded_8c_a3297fdae3fbc4a0f8a36f5de24b7994b}{mat\_add\_T}}(\mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_a, \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_b)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00040}00040     \textcolor{keywordflow}{if} (mat\_a == NULL || mat\_b ==NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00041}00041         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00042}00042     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00043}00043     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}} != mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}} || mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}} != mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}})\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00044}00044         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00045}00045     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00047}00047     \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_out = \mbox{\hyperlink{tensor__2d_8c_a2667b0018203aabb8f0427b382d17f04}{mat\_make}}(mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}, mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}});}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00048}00048     \textcolor{keywordflow}{if} (mat\_out == NULL) \{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00049}00049         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00050}00050     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00052}00052     pthread\_t threads[\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00053}00053     \textcolor{keywordtype}{int} batch = mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a55ed2709aa79847a1dbd09e87e08deeb}{n\_elems}}/\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00054}00054     \mbox{\hyperlink{structarray__op__args}{array\_op\_args}} args\_arr[\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00056}00056     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00057}00057         \mbox{\hyperlink{structarray__op__args}{array\_op\_args}} args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00058}00058         args.\mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{arr\_1}} = mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}} + i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00059}00059         args.\mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{arr\_2}} = mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}} + i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00060}00060         args.\mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{arr\_out}} = mat\_out-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}}+ i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00061}00061         \textcolor{keywordflow}{if} (i == \mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}-\/1)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00062}00062             args.\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}} = batch+mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a55ed2709aa79847a1dbd09e87e08deeb}{n\_elems}}\%\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00063}00063         \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00064}00064         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00065}00065         args.\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}} = batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00066}00066         \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00067}00067         args\_arr[i] = args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00068}00068     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00070}00070     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00071}00071         \textcolor{keywordtype}{void}* args\_ptr = \&(args\_arr[i]);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00072}00072         pthread\_create(\&(threads[i]), NULL, array\_add, args\_ptr);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00073}00073     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00075}00075     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00076}00076         pthread\_join(threads[i], NULL);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00077}00077     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00078}00078     \textcolor{keywordflow}{return} mat\_out;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00079}00079 \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00081}00081 \textcolor{keyword}{static} \textcolor{keywordtype}{void}* array\_subtract(\textcolor{keywordtype}{void}* args\_ptr)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00082}00082     \mbox{\hyperlink{structarray__op__args}{array\_op\_args}}* args = (\mbox{\hyperlink{structarray__op__args}{array\_op\_args}}*)args\_ptr;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00083}00083     \textcolor{keywordtype}{double}* arr\_1 = args-\/>\mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{arr\_1}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00084}00084     \textcolor{keywordtype}{double}* arr\_2 = args-\/>\mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{arr\_2}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00085}00085     \textcolor{keywordtype}{double}* arr\_out = args-\/>\mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{arr\_out}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00086}00086     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length = args-\/>\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00088}00088     \textcolor{keywordflow}{if} (arr\_1 == NULL || arr\_2 == NULL || arr\_out == NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00089}00089         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00090}00090     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00092}00092     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} i=0; i<length; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00093}00093         arr\_out[i] = arr\_1[i] -\/ arr\_2[i];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00094}00094     \}   }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00095}00095     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00096}00096 \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00098}\mbox{\hyperlink{tensor__2d__threaded_8c_a0a77f99c45633f5aae091384070a1307}{00098}} \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* \mbox{\hyperlink{tensor__2d__threaded_8c_a0a77f99c45633f5aae091384070a1307}{mat\_subtract\_T}}(\mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_a, \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_b)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00099}00099     \textcolor{keywordflow}{if} (mat\_a == NULL || mat\_b ==NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00100}00100         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00101}00101     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00102}00102     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}} != mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}} || mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}} != mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}})\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00103}00103         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00104}00104     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00106}00106     \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_out = \mbox{\hyperlink{tensor__2d_8c_a2667b0018203aabb8f0427b382d17f04}{mat\_make}}(mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}, mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}});}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00107}00107     \textcolor{keywordflow}{if} (mat\_out == NULL) \{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00108}00108         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00109}00109     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00110}00110 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00111}00111     pthread\_t threads[\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00112}00112     \textcolor{keywordtype}{int} batch = mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a55ed2709aa79847a1dbd09e87e08deeb}{n\_elems}}/\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00113}00113     \mbox{\hyperlink{structarray__op__args}{array\_op\_args}} args\_arr[\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00115}00115     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00116}00116         \mbox{\hyperlink{structarray__op__args}{array\_op\_args}} args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00117}00117         args.\mbox{\hyperlink{structarray__op__args_aafe6b04ac054443a9526cd9ededecf83}{arr\_1}} = mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}} + i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00118}00118         args.\mbox{\hyperlink{structarray__op__args_a82e13449271d083fbdd32c94f567789c}{arr\_2}} = mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}} + i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00119}00119         args.\mbox{\hyperlink{structarray__op__args_a5695b4a702cd818e9602f73110df476e}{arr\_out}} = mat\_out-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}}+ i*batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00120}00120         \textcolor{keywordflow}{if} (i == \mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}-\/1)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00121}00121             args.\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}} = batch+mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a55ed2709aa79847a1dbd09e87e08deeb}{n\_elems}}\%\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}};}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00122}00122         \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00123}00123         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00124}00124         args.\mbox{\hyperlink{structarray__op__args_a9d50a6471ff7d40764a6a7d59806db50}{length}} = batch;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00125}00125         \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00126}00126         args\_arr[i] = args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00127}00127     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00128}00128 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00129}00129     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00130}00130         \textcolor{keywordtype}{void}* args\_ptr = \&(args\_arr[i]);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00131}00131         pthread\_create(\&(threads[i]), NULL, array\_subtract, args\_ptr);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00132}00132     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00134}00134     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{tensor__2d__threaded_8c_a7735206bdfad487588bba2126b806ab7}{NUM\_THREADS}}; i++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00135}00135         pthread\_join(threads[i], NULL);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00136}00136     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00137}00137     \textcolor{keywordflow}{return} mat\_out;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00138}00138 \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00140}00140 \textcolor{keyword}{static} \textcolor{keywordtype}{void}* array\_mat\_mul(\textcolor{keywordtype}{void}* args\_ptr)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00141}00141     \mbox{\hyperlink{structarray__mat__mul__args}{array\_mat\_mul\_args}}* args = (\mbox{\hyperlink{structarray__mat__mul__args}{array\_mat\_mul\_args}}*) args\_ptr;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00142}00142 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00143}00143     \textcolor{keywordflow}{if} (args == NULL) \{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00144}00144         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00145}00145     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00146}00146     \textcolor{keywordflow}{if} (args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a06fbdde7fca4cd3be5d7d25c72ce636b}{arr}} == NULL ||args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}} == NULL|| args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{arr\_out}} == NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00147}00147         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00148}00148     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00149}00149     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} col = 0; col< args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}}-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}; col++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00150}00150         (args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{arr\_out}})[col] = 0.0;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00151}00151         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}}-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}; i++) \{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00152}00152             (args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{arr\_out}})[col] += args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a06fbdde7fca4cd3be5d7d25c72ce636b}{arr}}[i] * args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}}-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}}[col + i*args-\/>\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}}-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00153}00153         \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00154}00154     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00155}00155 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00156}00156     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00157}00157 \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00159}\mbox{\hyperlink{tensor__2d__threaded_8c_ae43ea7fdeaf2fc2a0718aafd6050e315}{00159}} \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* \mbox{\hyperlink{tensor__2d__threaded_8c_ae43ea7fdeaf2fc2a0718aafd6050e315}{mat\_mul\_T}}(\mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_a, \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_b)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00160}00160     \textcolor{keywordflow}{if} (mat\_a == NULL || mat\_b ==NULL)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00161}00161         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00162}00162     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00163}00163     \textcolor{keywordflow}{if} (mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}} != mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}})\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00164}00164         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00165}00165     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00166}00166     \mbox{\hyperlink{structtensor__2d}{tensor\_2d}}* mat\_out = \mbox{\hyperlink{tensor__2d_8c_ae908690f3acf39314e6bf3f944f5ca98}{mat\_zeros}}(mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}, mat\_b-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}});}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00167}00167     \textcolor{keywordflow}{if} (mat\_out == NULL) \{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00168}00168         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00169}00169     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00171}00171     \textcolor{comment}{// if (mat\_a-\/>n\_rows < NUM\_THREADS) \{}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00172}00172     \textcolor{comment}{//     unsigned int num\_threads = mat\_a-\/>n\_rows;}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00173}00173     \textcolor{comment}{// \}}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00174}00174     \textcolor{comment}{// else\{}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00175}00175     \textcolor{comment}{//     unsigned int num\_threads = NUM\_THREADS;}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00176}00176     \textcolor{comment}{// \}}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00177}00177 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00178}00178     pthread\_t threads[mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00179}00179     \mbox{\hyperlink{structarray__mat__mul__args}{array\_mat\_mul\_args}} args\_arr[mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}];}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00180}00180 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00181}00181     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} row=0; row<mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}; row++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00182}00182         \mbox{\hyperlink{structarray__mat__mul__args}{array\_mat\_mul\_args}} args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00183}00183         args.\mbox{\hyperlink{structarray__mat__mul__args_a06fbdde7fca4cd3be5d7d25c72ce636b}{arr}} = \&(mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}}[row*mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}]);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00184}00184         args.\mbox{\hyperlink{structarray__mat__mul__args_a1387f2e09d7a18b51692c3fc4d44486e}{mat}} = mat\_b;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00185}00185         args.\mbox{\hyperlink{structarray__mat__mul__args_a70f1c4c2f583f4f48da867563148d512}{arr\_out}} = \&(mat\_out-\/>\mbox{\hyperlink{structtensor__2d_a6492607aca3c85d57b8bcc4326db876d}{data}}[row*mat\_out-\/>\mbox{\hyperlink{structtensor__2d_a74f3fe7324753175d7a4af46c6588d38}{n\_cols}}]);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00186}00186 }
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00187}00187         args\_arr[row] = args;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00188}00188     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00189}00189     \textcolor{comment}{//consider combing these later}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00190}00190     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} row=0; row<mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}; row++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00191}00191         \textcolor{keywordtype}{void}* args\_ptr = \&(args\_arr[row]);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00192}00192         pthread\_create(\&(threads[row]), NULL, array\_mat\_mul, args\_ptr);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00193}00193     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00194}00194     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} row=0; row<mat\_a-\/>\mbox{\hyperlink{structtensor__2d_a809ce78f21bd51f42dc21a0881e0eb33}{n\_rows}}; row++)\{}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00195}00195         pthread\_join(threads[row], NULL);}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00196}00196     \}}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00197}00197     \textcolor{keywordflow}{return} mat\_out;}
\DoxyCodeLine{\Hypertarget{tensor__2d__threaded_8c_source_l00198}00198 \}}

\end{DoxyCode}
